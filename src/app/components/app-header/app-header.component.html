<div class="container" (mouseleave)="hideTemplate()">
    <div class="icon">
        <img [src]="cakeIcon" alt="Cake Logo" loading="lazy"/>
    </div>
    @if (!mobileView) {
    <nav class="nav">
        <ul>
            <li><a>Home</a></li>
            <li class="expandible-li" (mouseenter)="showTemplate('shopTemplate')">
                <a>Shop</a>
                <div class="shop-container" 
                    *ngIf="activeTemplate === 'shopTemplate'" 
                    (mouseenter)="showTemplate('shopTemplate')"
                    (mouseleave)="hideTemplate()">
                    <ng-container *ngTemplateOutlet="shopTemplateRef"></ng-container>
                </div>
            </li>
            <li class="expandible-li" (mouseenter)="showTemplate('recipesTemplate')">
                <a>Recipes</a>
                <div class="recipes-container" 
                *ngIf="activeTemplate === 'recipesTemplate'" 
                (mouseenter)="showTemplate('recipesTemplate')"
                (mouseleave)="hideTemplate()">
                    <ng-container *ngTemplateOutlet="recipesTemplateRef"></ng-container>
                </div>
            </li>
            <li><a>Flavours</a></li>
            <li><a>Blog</a></li>
            <li><a>Contact</a></li>
        </ul>
    </nav>
    } @else {
        <div class="menu-button" (click)="toggleMenu()">
            <button>Menu</button>
            <span><fa-icon [icon]="menuIcon"></fa-icon></span>
        </div>
    }
    <div class="functions">
        <ul>
            <li><a><fa-icon [icon]="userProfileIcon"></fa-icon></a></li>
            <li><a><fa-icon [attr.cart-count]="cartCount().toString()" class="cartIcon" [icon]="cartShoppingIcon"></fa-icon></a></li>
            <li><a><fa-icon [icon]="searchIcon"></fa-icon></a></li>
            <li>
                <select class="currency" name="currency" id="currency">
                    <option value="USD">USD</option>
                </select>
            </li>
        </ul>
    </div>
</div>

<ng-template #shopTemplateRef>
    @for(category of categories; track category) {
        <div class="category">
            <div class="category-title"> {{ category }} </div>
            @for(categoryData of categoriesData[category]; track categoryData) {
                <div class="category-data">{{ categoryData }}</div>
            }
        </div>
    }
    <div class="category">
        <img src="/assets/images/shop-image.jpg" alt="Coffee and Cake Image" loading="lazy"/>
    </div>
</ng-template>

<ng-template #recipesTemplateRef>
    @for(recipe of recipes; track recipe; let i = $index) {
    <div class="recipe-container">
        <img [src]="recipe.imgSrc" [alt]="'Recipe Image' + (i+1)" loading="lazy"/>
        <button class="recipe-button">{{ recipe.name }} - {{ recipe.price }}</button>
    </div>
    }
</ng-template>